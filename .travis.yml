language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: TCQC0tbbqSdK8dZbhY+VG1lDeHyjTc1rsprCXV6u5JXsK3246yVxgvkwtltM6nvccoZ/ph5rhBoM7ucgW6lFAL8c8IK3+VuaXj3l3pA/EndHA7TBPpOQpPDm7yPzIf1nWzBdv5UFROcDs7e6Ox9aiLt2/+7JSsziF2Wv9Df6iB4+wrn0e1b1xhwedIPhHeex0JW8z+280lNhzArxE5X7Qk7/Sg/zJw+/eACOttcKjzE39ciohCQvUYq2nDb1CLOtNfvx4tmmMgX7tLczUPWj+oOnRHg1LpuNUrqH9rtBzmqTAV87JvVuKpYMLP/7+I8Y32fx6BgYnXGdGpeP7nQuekdGLeV5G7QP901z3rGaEXpZMhzrFzyjzONVj1oe/NdKrallYQ92E+ZgGqOi9o0Sl+z/lCSITXM15M9tIzC1saU2sOpKZUi5nIXfhiifjVCW3rB+4/fSy7smgd6NrVLyWWOtJ4Vwohq0BfThHNU8s0RnyOH8tTVj2ybIwHP7lZf+g+d/IrgKljHCrLf3UAqucuInCPd29WvSJ9RVxl/u3GDwqwlHJrlvVShv5HIZ1/nX2dSL5uJpJF4hFUGeJu+kcK3mrPg0L2umHzgg54/LFGfgF5EswsEAyyQDTtzPWk76pigl4siEL8c1MPyi2mJ4zHbHnk53jB5U+qijHOPozAA=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
